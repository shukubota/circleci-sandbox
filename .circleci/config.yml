version: 2.1

setup: true
orbs:
  continuation: circleci/continuation@0.1.2

jobs:
  setup:
    executor: continuation/default
    steps:
      - checkout
      - run:
          command: |
            echo "${CIRCLE_BRANCH}"
      - run:
          command: |
            if [ "${CIRCLE_BRANCH}" == "main" ]; then
              TARGET_FILE=".circleci/main.yml"
            else
              TARGET_FILE=".circleci/develop.yml"
            fi
      - continuation/continue:
          configuration_path: ${TARGET_FILE}

workflows:
  setup:
    jobs:
      - setup